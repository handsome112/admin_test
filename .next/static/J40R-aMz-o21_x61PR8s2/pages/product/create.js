(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{Auzb:function(e,t,r){"use strict";r.r(t);var n=r("o0o1"),a=r.n(n),i=r("HaE+"),u=r("1OyB"),c=r("vuIU"),l=r("JX7q"),o=r("Ji7U"),s=r("md7G"),f=r("foSv"),d=r("rePB"),p=r("q1tI"),b=r.n(p),h=r("8Kt/"),m=r.n(h),_=r("tsqr"),v=r("Bfpx"),g=r("HR6+"),y=r("nOHt"),w=r.n(y),N=r("2yP/"),O=r("10yp"),P="/var/www/admin.dtest.live/pages/product/create.tsx",j=b.a.createElement;function x(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}var k=function(e){Object(o.a)(r,e);var t=x(r);function r(){var e;Object(u.a)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object(d.a)(Object(l.a)(e),"state",{uploading:!1,preview:null,uploadPercentage:0}),Object(d.a)(Object(l.a)(e),"_files",{image:null,digitalFile:null}),e}return Object(c.a)(r,[{key:"beforeUpload",value:function(e,t){this._files[t]=e}},{key:"onUploading",value:function(e){this.setState({uploadPercentage:e.percentage})}},{key:"submit",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var r,n,i=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("digital"!==t.type||this._files.digitalFile){e.next=4;break}return e.abrupt("return",_.a.error("Please select digital file!"));case 4:"physical"===t.type&&(this._files.digitalFile=null);case 5:return r=Object.keys(this._files).reduce((function(e,t){return i._files[t]&&e.push({fieldname:t,file:i._files[t]||null}),e}),[]),e.next=8,this.setState({uploading:!0});case 8:return e.prev=8,e.next=11,g.a.createProduct(r,t,this.onUploading.bind(this));case 11:return n=e.sent,_.a.success("Product has been created"),e.next=15,this.setState({uploading:!1},(function(){return window.setTimeout((function(){w.a.push({pathname:"/product/update",query:{id:n.data._id}},"/product/update?id=".concat(n.data._id),{shallow:!0})}),1e3)}));case 15:e.next=22;break;case 17:return e.prev=17,e.t0=e.catch(8),_.a.error("An error occurred, please try again!"),e.next=22,this.setState({uploading:!1});case 22:case"end":return e.stop()}}),e,this,[[8,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.uploading,r=e.uploadPercentage;return j(p.Fragment,{__self:this,__source:{fileName:P,lineNumber:99,columnNumber:7}},j(m.a,{__self:this,__source:{fileName:P,lineNumber:100,columnNumber:9}},j("title",{__self:this,__source:{fileName:P,lineNumber:101,columnNumber:11}},"Create product")),j(N.a,{breadcrumbs:[{title:"Product",href:"/product"},{title:"Create new product"}],__self:this,__source:{fileName:P,lineNumber:103,columnNumber:9}}),j(v.a,{__self:this,__source:{fileName:P,lineNumber:109,columnNumber:9}},j(O.a,{submit:this.submit.bind(this),beforeUpload:this.beforeUpload.bind(this),uploading:t,uploadPercentage:r,__self:this,__source:{fileName:P,lineNumber:110,columnNumber:11}})))}}]),r}(p.PureComponent);t.default=k},Rpdx:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/product/create",function(){return r("Auzb")}])}},[["Rpdx",0,1,9,16,2,4,5,6,7,10,8,12,11,13,14,15,17,18,19,20,21,27,28,38,3]]]);