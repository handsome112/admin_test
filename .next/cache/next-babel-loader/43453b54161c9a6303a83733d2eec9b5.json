{"ast":null,"code":"var _jsxFileName = \"/var/www/admin.dtest.live/pages/email-templates/index.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport { PureComponent } from 'react';\nimport { Table, message, Breadcrumb, Dropdown, Menu, Button } from 'antd';\nimport { HomeOutlined, DownOutlined, EditOutlined } from '@ant-design/icons';\nimport Page from '@components/common/layout/page';\nimport { formatDate } from '@lib/date';\nimport { emailTemplateService } from '@services/email-template.service';\n\nclass EmailTemplates extends PureComponent {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      searching: false,\n      list: []\n    });\n  }\n\n  componentDidMount() {\n    this.search();\n  }\n\n  async search() {\n    try {\n      await this.setState({\n        searching: true\n      });\n      const resp = await emailTemplateService.findAll();\n      await this.setState({\n        searching: false,\n        list: resp.data\n      });\n    } catch (e) {\n      message.error('An error occurred, please try again!');\n      await this.setState({\n        searching: false\n      });\n    }\n  }\n\n  render() {\n    const {\n      list,\n      searching\n    } = this.state;\n    const columns = [{\n      title: 'Key',\n      dataIndex: 'key'\n    }, {\n      title: 'Name',\n      dataIndex: 'name',\n\n      render(data, record) {\n        return __jsx(React.Fragment, null, __jsx(Link, {\n          href: {\n            pathname: '/email-templates/update',\n            query: {\n              id: record._id\n            }\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 15\n          }\n        }, __jsx(\"a\", {\n          style: {\n            fontWeight: 'bold'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 17\n          }\n        }, record.name)), __jsx(\"br\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 15\n          }\n        }), __jsx(\"small\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 15\n          }\n        }, record.description));\n      }\n\n    }, {\n      title: 'Subject',\n      dataIndex: 'subject'\n    }, {\n      title: 'Last update',\n      dataIndex: 'updatedAt',\n      sorter: true,\n\n      render(date) {\n        return __jsx(\"span\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 18\n          }\n        }, formatDate(date));\n      }\n\n    }, {\n      title: 'Actions',\n      dataIndex: '_id',\n      render: id => __jsx(Dropdown, {\n        overlay: __jsx(Menu, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 15\n          }\n        }, __jsx(Menu.Item, {\n          key: \"edit\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 17\n          }\n        }, __jsx(Link, {\n          href: {\n            pathname: '/email-templates/update',\n            query: {\n              id\n            }\n          },\n          as: `/email-templates/update?id=${id}`,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 19\n          }\n        }, __jsx(\"a\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 21\n          }\n        }, __jsx(EditOutlined, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 23\n          }\n        }), ' ', \"Update\")))),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }\n      }, __jsx(Button, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 13\n        }\n      }, \"Actions\", ' ', __jsx(DownOutlined, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 15\n        }\n      })))\n    }];\n    return __jsx(React.Fragment, null, __jsx(Head, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }\n    }, __jsx(\"title\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }\n    }, \"Email templates\")), __jsx(\"div\", {\n      style: {\n        marginBottom: '16px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }\n    }, __jsx(Breadcrumb, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }\n    }, __jsx(Breadcrumb.Item, {\n      href: \"/dashboard\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }\n    }, __jsx(HomeOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 15\n      }\n    })), __jsx(Breadcrumb.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 13\n      }\n    }, \"Email templates\"))), __jsx(Page, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }\n    }, __jsx(Table, {\n      dataSource: list,\n      columns: columns,\n      rowKey: \"_id\",\n      loading: searching,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nexport default EmailTemplates;","map":null,"metadata":{},"sourceType":"module"}