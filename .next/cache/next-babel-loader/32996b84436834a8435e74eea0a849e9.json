{"ast":null,"code":"var _jsxFileName = \"/var/www/admin.dtest.live/pages/token-package/index.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { HomeOutlined } from '@ant-design/icons';\nimport Head from 'next/head';\nimport { message, Breadcrumb } from 'antd';\nimport Page from '@components/common/layout/page';\nimport { PureComponent } from 'react';\nimport { SearchFilter } from '@components/common/search-filter';\nimport { tokenPackageService } from 'src/services';\nimport { TokenPackageTable } from 'src/components/token-package/table-list';\nimport { getResponseError } from '@lib/utils';\nimport Loader from '@components/common/base/loader';\n\nclass TokenPage extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      filter: {\n        sortBy: 'updatedAt',\n        sort: 'desc'\n      },\n      packageList: [],\n      q: \"\"\n    };\n  }\n\n  componentDidMount() {\n    this.getData();\n  }\n\n  async getData() {\n    const resp = await tokenPackageService.list({\n      limit: 100,\n      offset: 0,\n      q: this.state.q\n    });\n    await this.setState({\n      packageList: resp.data.data,\n      loading: false\n    });\n  }\n\n  async searchByName(k) {\n    console.log(k);\n    await this.setState({\n      q: k.q\n    });\n    this.getData();\n  }\n\n  handleDelete(id) {\n    const {\n      packageList\n    } = this.state;\n    tokenPackageService.delete(id).then(() => {\n      this.setState({\n        packageList: packageList.filter(packageId => packageId._id !== id)\n      });\n      return message.success('Deleted successfully');\n    }).catch(e => {\n      const err = Promise.resolve(e);\n      return message.error(getResponseError(err));\n    });\n  }\n\n  render() {\n    const {\n      packageList,\n      loading\n    } = this.state;\n    return __jsx(React.Fragment, null, __jsx(Head, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }\n    }, __jsx(\"title\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }\n    }, \"Token Packages\")), __jsx(\"div\", {\n      style: {\n        marginBottom: '16px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }\n    }, __jsx(Breadcrumb, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }\n    }, __jsx(Breadcrumb.Item, {\n      href: \"/dashboard\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }\n    }, __jsx(HomeOutlined, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 15\n      }\n    })), __jsx(Breadcrumb.Item, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }\n    }, \"Token Packages\"))), loading ? __jsx(Loader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }\n    }) : __jsx(Page, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }\n    }, __jsx(SearchFilter, {\n      onSubmit: this.searchByName.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 13\n      }\n    }), __jsx(TokenPackageTable, {\n      dataSource: packageList,\n      rowKey: \"_id\",\n      delete: this.handleDelete.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }\n    })));\n  }\n\n}\n\nexport default TokenPage;","map":null,"metadata":{},"sourceType":"module"}