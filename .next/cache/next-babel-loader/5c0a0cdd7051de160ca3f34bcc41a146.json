{"ast":null,"code":"var _jsxFileName = \"/var/www/admin.dtest.live/src/components/performer/common/select-performer-dropdown.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { PureComponent } from 'react';\nimport { Select } from 'antd';\nimport { sortBy } from 'lodash';\nimport { performerService } from '@services/performer.service';\nconst {\n  Option\n} = Select;\nexport class SelectPerformerDropdown extends PureComponent {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"_initalData\", []);\n\n    _defineProperty(this, \"state\", {\n      data: [],\n      value: undefined\n    });\n\n    _defineProperty(this, \"handleSearch\", value => {\n      const q = value.toLowerCase();\n\n      const filtered = this._initalData.filter(p => {\n        return p.username.includes(q) || (p.name || '').toLowerCase().includes(q);\n      });\n\n      this.setState({\n        data: filtered\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.loadPerformers();\n  }\n\n  async loadPerformers(q) {\n    // TODO - should check for better option?\n    const resp = await performerService.search({\n      limit: 1000\n    });\n    this._initalData = sortBy(resp.data.data, i => i.username);\n    this.setState({\n      data: [...this._initalData]\n    });\n  }\n\n  render() {\n    const {\n      disabled\n    } = this.props;\n    return __jsx(Select, {\n      showSearch: true,\n      value: this.state.value,\n      placeholder: this.props.placeholder,\n      style: this.props.style,\n      defaultActiveFirstOption: false,\n      showArrow: true,\n      filterOption: false,\n      onSearch: this.handleSearch,\n      onChange: this.props.onSelect.bind(this),\n      notFoundContent: null,\n      defaultValue: this.props.defaultValue || undefined,\n      disabled: disabled,\n      allowClear: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 7\n      }\n    }, this.state.data.map(p => __jsx(Option, {\n      key: p._id,\n      value: p._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }\n    }, __jsx(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }\n    }, __jsx(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 15\n      }\n    }, p.username), \" / \", __jsx(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 47\n      }\n    }, p.name)))));\n  }\n\n}","map":null,"metadata":{},"sourceType":"module"}