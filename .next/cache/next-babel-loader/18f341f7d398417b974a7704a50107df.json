{"ast":null,"code":"var _jsxFileName = \"/var/www/admin.dtest.live/pages/order/detail.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Layout, message, Input, Select, Button } from 'antd';\nimport Head from 'next/head';\nimport { PureComponent } from 'react';\nimport { BreadcrumbComponent } from '@components/common/breadcrumb';\nimport Page from '@components/common/layout/page';\nimport { orderService } from 'src/services';\nimport Router from 'next/router';\nimport { getResponseError } from '@lib/utils';\nconst {\n  Content\n} = Layout;\n\nclass OrderDetailPage extends PureComponent {\n  static async getInitialProps({\n    ctx\n  }) {\n    return ctx.query;\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      submitting: false,\n      order: null,\n      loading: true,\n      isUpdating: true,\n      shippingCode: '',\n      deliveryStatus: ''\n    };\n  }\n\n  componentDidMount() {\n    this.getData();\n  }\n\n  async getData() {\n    try {\n      const order = await orderService.findById(this.props.id);\n      await this.setState({\n        order: order.data,\n        shippingCode: order.data.shippingCode,\n        deliveryStatus: order.data.deliveryStatus\n      });\n    } catch (e) {\n      message.error('Can not find order!');\n    } finally {\n      this.setState({\n        loading: false\n      });\n    }\n  }\n\n  async onUpdate() {\n    const {\n      deliveryStatus,\n      shippingCode\n    } = this.state;\n\n    if (!shippingCode) {\n      return message.error('Missing shipping code');\n    }\n\n    try {\n      this.setState({\n        loading: true\n      });\n      await orderService.update(this.props.id, {\n        deliveryStatus,\n        shippingCode\n      });\n      message.success('Changes saved.');\n    } catch (e) {\n      message.error(getResponseError(e));\n    } finally {\n      await this.setState({\n        loading: false\n      });\n      Router.push('/order');\n    }\n  }\n\n  render() {\n    var _order$buyerInfo, _order$sellerInfo;\n\n    const {\n      order\n    } = this.state;\n    return __jsx(Layout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 7\n      }\n    }, __jsx(Head, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }\n    }, __jsx(\"title\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }\n    }, \"Order Details\")), __jsx(Content, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }\n    }, __jsx(\"div\", {\n      className: \"main-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }\n    }, __jsx(BreadcrumbComponent, {\n      breadcrumbs: [{\n        title: 'Orders',\n        href: '/order'\n      }, {\n        title: '#' + (order === null || order === void 0 ? void 0 : order.orderNumber)\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }\n    }), __jsx(Page, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }\n    }, order && __jsx(\"div\", {\n      className: \"main-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }\n    }, __jsx(\"div\", {\n      style: {\n        marginBottom: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 19\n      }\n    }, __jsx(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 21\n      }\n    }, \"#\", order === null || order === void 0 ? void 0 : order.orderNumber)), __jsx(\"div\", {\n      style: {\n        marginBottom: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 19\n      }\n    }, __jsx(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 21\n      }\n    }, \"Buyer:\"), \" \", (_order$buyerInfo = order.buyerInfo) === null || _order$buyerInfo === void 0 ? void 0 : _order$buyerInfo.username), __jsx(\"div\", {\n      style: {\n        marginBottom: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 19\n      }\n    }, __jsx(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 21\n      }\n    }, \"Seller:\"), \" \", (_order$sellerInfo = order.sellerInfo) === null || _order$sellerInfo === void 0 ? void 0 : _order$sellerInfo.username), __jsx(\"div\", {\n      style: {\n        marginBottom: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 19\n      }\n    }, __jsx(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 21\n      }\n    }, \"Product:\"), __jsx(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 21\n      }\n    }, order.name), \" \", __jsx(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 47\n      }\n    }), __jsx(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 21\n      }\n    }, order.description)), __jsx(\"div\", {\n      style: {\n        marginBottom: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 19\n      }\n    }, __jsx(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 21\n      }\n    }, \"Product type:\"), __jsx(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 21\n      }\n    }, order.produtType)), __jsx(\"div\", {\n      style: {\n        marginBottom: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 19\n      }\n    }, __jsx(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 21\n      }\n    }, \"Quantity:\"), \" \", order.quantity), __jsx(\"div\", {\n      style: {\n        marginBottom: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 19\n      }\n    }, __jsx(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 21\n      }\n    }, \"Total Price:\"), order.payBy === 'token' ? __jsx(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 25\n      }\n    }, order.totalPrice, \" token(s)\") : __jsx(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 25\n      }\n    }, \"$\", order.totalPrice)), order.productType !== 'physical' ? __jsx(\"div\", {\n      style: {\n        marginBottom: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 21\n      }\n    }, \"Delivery Status: Delivered\") : __jsx(React.Fragment, null, __jsx(\"div\", {\n      style: {\n        marginBottom: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 23\n      }\n    }, __jsx(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 25\n      }\n    }, \"Delivery Address:\"), \" \", order.deliveryAddress || 'N/A'), __jsx(\"div\", {\n      style: {\n        marginBottom: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 23\n      }\n    }, __jsx(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 25\n      }\n    }, \"Delivery Postal Code:\"), \" \", order.postalCode || 'N/A'), __jsx(\"div\", {\n      style: {\n        marginBottom: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 23\n      }\n    }, \"Shipping Code:\", ' ', __jsx(Input, {\n      placeholder: \"Enter shipping code here\",\n      defaultValue: order.shippingCode,\n      onChange: e => this.setState({\n        shippingCode: e.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 25\n      }\n    })), __jsx(\"div\", {\n      style: {\n        marginBottom: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 23\n      }\n    }, \"Delivery Status:\", ' ', __jsx(Select, {\n      onChange: e => this.setState({\n        deliveryStatus: e\n      }),\n      defaultValue: order.deliveryStatus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 25\n      }\n    }, __jsx(Select.Option, {\n      key: \"processing\",\n      value: \"processing\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 27\n      }\n    }, \"Processing\"), __jsx(Select.Option, {\n      key: \"shipping\",\n      value: \"shipping\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 27\n      }\n    }, \"Shipping\"), __jsx(Select.Option, {\n      key: \"delivered\",\n      value: \"delivered\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 27\n      }\n    }, \"Delivered\"), __jsx(Select.Option, {\n      key: \"refunded\",\n      value: \"refunded\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 27\n      }\n    }, \"Refunded\"))), __jsx(\"div\", {\n      style: {\n        marginBottom: '10px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 23\n      }\n    }, __jsx(Button, {\n      danger: true,\n      onClick: this.onUpdate.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 25\n      }\n    }, \"Update\"))))))));\n  }\n\n}\n\n_defineProperty(OrderDetailPage, \"authenticate\", true);\n\n_defineProperty(OrderDetailPage, \"onlyPerformer\", true);\n\nexport default OrderDetailPage;","map":null,"metadata":{},"sourceType":"module"}