{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{AwtO:function(e,t,r){\"use strict\";r.r(t);var n=r(\"o0o1\"),i=r.n(n),a=r(\"HaE+\"),u=r(\"1OyB\"),c=r(\"vuIU\"),s=r(\"JX7q\"),o=r(\"Ji7U\"),l=r(\"md7G\"),f=r(\"foSv\"),p=r(\"rePB\"),b=r(\"q1tI\"),d=r.n(b),h=r(\"8Kt/\"),m=r.n(h),_=r(\"Bfpx\"),v=r(\"tsqr\"),y=r(\"HR6+\"),O=r(\"TW7V\"),g=r(\"2yP/\"),w=r(\"10yp\"),j=\"/var/www/admin.dtest.live/pages/product/update.tsx\",N=d.a.createElement;function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){Object(p.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(f.a)(e);if(t){var i=Object(f.a)(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Object(l.a)(this,r)}}var S=function(e){Object(o.a)(r,e);var t=x(r);function r(){var e;Object(u.a)(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),Object(p.a)(Object(s.a)(e),\"state\",{submitting:!1,fetching:!0,product:{},uploadPercentage:0}),Object(p.a)(Object(s.a)(e),\"_files\",{image:null,digitalFile:null}),e}return Object(c.a)(r,[{key:\"componentDidMount\",value:function(){var e=Object(a.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.findById(this.props.id);case 3:t=e.sent,this.setState({product:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),v.a.error(\"Product not found!\");case 10:return e.prev=10,this.setState({fetching:!1}),e.finish(10);case 13:case\"end\":return e.stop()}}),e,this,[[0,7,10,13]])})));return function(){return e.apply(this,arguments)}}()},{key:\"beforeUpload\",value:function(e,t){this._files[t]=e}},{key:\"onUploading\",value:function(e){(this._files.image||this._files.digitalFile)&&this.setState({uploadPercentage:e.percentage})}},{key:\"submit\",value:function(){var e=Object(a.a)(i.a.mark((function e(t){var r,n,a=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=Object.keys(this._files).reduce((function(e,t){return a._files[t]&&e.push({fieldname:t,file:a._files[t]||null}),e}),[]),this.setState({submitting:!0}),n=k({},t),e.next=6,y.a.update(this.props.id,r,n,this.onUploading.bind(this));case 6:v.a.success(\"Updated successfully\"),this.setState({submitting:!1}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),v.a.error(\"Something went wrong, please try again!\"),this.setState({submitting:!1});case 14:case\"end\":return e.stop()}}),e,this,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:\"render\",value:function(){var e=this.state,t=e.product,r=e.submitting,n=e.fetching,i=e.uploadPercentage;return N(b.Fragment,{__self:this,__source:{fileName:j,lineNumber:95,columnNumber:7}},N(m.a,{__self:this,__source:{fileName:j,lineNumber:96,columnNumber:9}},N(\"title\",{__self:this,__source:{fileName:j,lineNumber:97,columnNumber:11}},\"Update Product\")),N(g.a,{breadcrumbs:[{title:\"Product\",href:\"/product\"},{title:t.name?t.name:\"Detail product\"},{title:\"Update\"}],__self:this,__source:{fileName:j,lineNumber:99,columnNumber:9}}),N(_.a,{__self:this,__source:{fileName:j,lineNumber:106,columnNumber:9}},n?N(O.a,{__self:this,__source:{fileName:j,lineNumber:108,columnNumber:13}}):N(w.a,{product:t,submit:this.submit.bind(this),uploading:r,beforeUpload:this.beforeUpload.bind(this),uploadPercentage:i,__self:this,__source:{fileName:j,lineNumber:110,columnNumber:13}})))}}],[{key:\"getInitialProps\",value:function(){var e=Object(a.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.ctx,e.abrupt(\"return\",r.query);case 2:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(b.PureComponent);t.default=S},EKMm:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/product/update\",function(){return r(\"AwtO\")}])}},[[\"EKMm\",0,1,9,17,2,4,5,6,7,8,10,11,12,13,14,15,16,19,18,20,21,27,28,37,3]]]);","extractedComments":[]}