{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{Kcfj:function(e,t,r){\"use strict\";r.r(t);var n=r(\"o0o1\"),a=r.n(n),s=r(\"HaE+\"),u=r(\"1OyB\"),c=r(\"vuIU\"),i=r(\"JX7q\"),o=r(\"Ji7U\"),f=r(\"md7G\"),l=r(\"foSv\"),p=r(\"rePB\"),v=r(\"q1tI\"),d=r.n(v),b=r(\"8Kt/\"),h=r.n(b),m=r(\"tsqr\"),y=r(\"Bfpx\"),w=r(\"nOHt\"),_=r.n(w),O=r(\"CLrh\"),g=r(\"diQs\"),j=r(\"NsEo\"),k=r(\"v2Sy\"),N=\"/var/www/admin.dtest.live/pages/users/create.tsx\",x=d.a.createElement;function R(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(f.a)(this,r)}}var U=function(e){Object(o.a)(r,e);var t=R(r);function r(){var e;Object(u.a)(this,r);for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),Object(p.a)(Object(i.a)(e),\"state\",{pwUpdating:!1,creating:!1,fetching:!1,user:{}}),Object(p.a)(Object(i.a)(e),\"_avatar\",void 0),e}return Object(c.a)(r,[{key:\"submit\",value:function(){var e=Object(s.a)(a.a.mark((function e(t){var r,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.password===t.rePassword){e.next=3;break}return e.abrupt(\"return\",m.a.error(\"Confirm password mismatch!\"));case 3:if(Object(j.c)(t.username)){e.next=5;break}return e.abrupt(\"return\",m.a.error(\"Username is invalid!\"));case 5:return this.setState({creating:!0}),e.next=8,O.k.create(t);case 8:if(r=e.sent,m.a.success(\"Updated successfully\"),!this._avatar){e.next=13;break}return e.next=13,O.k.uploadAvatarUser(this._avatar,r.data._id);case 13:_.a.push(\"/users/update?id=\".concat(r.data._id)),e.next=25;break;case 16:return e.prev=16,e.t0=e.catch(0),e.next=20,Promise.resolve(e.t0);case 20:if(e.t1=e.sent,e.t1){e.next=23;break}e.t1={};case 23:n=e.t1,m.a.error(Object(j.b)(n)||\"An error occurred, please try again!\");case 25:return e.prev=25,this.setState({creating:!1}),e.finish(25);case 28:case\"end\":return e.stop()}}),e,this,[[0,16,25,28]])})));return function(t){return e.apply(this,arguments)}}()},{key:\"onBeforeUpload\",value:function(e){this._avatar=e}},{key:\"render\",value:function(){var e=this.state.creating,t=this.props.countries;O.a.getToken();return x(v.Fragment,{__self:this,__source:{fileName:N,lineNumber:86,columnNumber:7}},x(h.a,{__self:this,__source:{fileName:N,lineNumber:87,columnNumber:9}},x(\"title\",{__self:this,__source:{fileName:N,lineNumber:88,columnNumber:11}},\"Create user\")),x(y.a,{__self:this,__source:{fileName:N,lineNumber:90,columnNumber:9}},x(k.a,{onFinish:this.submit.bind(this),updating:e,options:{beforeUpload:this.onBeforeUpload.bind(this)},countries:t,__self:this,__source:{fileName:N,lineNumber:91,columnNumber:11}})))}}],[{key:\"getInitialProps\",value:function(){var e=Object(s.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.countriesList();case 2:return t=e.sent,e.abrupt(\"return\",{countries:t.data});case 4:case\"end\":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),r}(v.PureComponent);t.default=U},NsEo:function(e,t,r){\"use strict\";r.d(t,\"b\",(function(){return c})),r.d(t,\"c\",(function(){return i})),r.d(t,\"a\",(function(){return o}));var n=r(\"o0o1\"),a=r.n(n),s=r(\"HaE+\");r(\"LvDl\");var u=r(\"CLrh\");function c(e){if(!e)return\"\";if(Array.isArray(e.message)){var t=e.message[0];return t.constraints?Object.values(t.constraints)[0]:e.error||\"Bad request!\"}return\"string\"===typeof e.message?e.message:\"Bad request!\"}function i(e){return/^[a-zA-Z0-9]+$/.test(e)}function o(e,t){return new Promise(function(){var r=Object(s.a)(a.a.mark((function r(n,s){var c;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:(c=new XMLHttpRequest).onload=function(){var e=new Blob([c.response],{type:\"text/csv\"}),r=URL.createObjectURL(e),a=document.createElement(\"a\");a.href=r,a.setAttribute(\"download\",t),a.click(),URL.revokeObjectURL(r),n({success:!0})},c.onerror=function(e){s(e)},c.open(\"GET\",e),c.setRequestHeader(\"Authorization\",u.a.getToken()),c.responseType=\"blob\",c.send();case 7:case\"end\":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())}},Qwwp:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/users/create\",function(){return r(\"Kcfj\")}])},diQs:function(e,t,r){\"use strict\";r.d(t,\"a\",(function(){return o}));var n=r(\"1OyB\"),a=r(\"vuIU\"),s=r(\"Ji7U\"),u=r(\"md7G\"),c=r(\"foSv\");function i(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Object(c.a)(e);if(t){var a=Object(c.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(u.a)(this,r)}}var o=new(function(e){Object(s.a)(r,e);var t=i(r);function r(){return Object(n.a)(this,r),t.apply(this,arguments)}return Object(a.a)(r,[{key:\"countriesList\",value:function(){return this.get(\"/countries/list\")}},{key:\"languagesList\",value:function(){return this.get(\"/languages/list\")}},{key:\"phoneCodesList\",value:function(){return this.get(\"/phone-codes/list\")}},{key:\"statistics\",value:function(){return this.get(\"/statistics/admin\")}}]),r}(r(\"/bfT\").a))}},[[\"Qwwp\",0,1,9,16,23,2,4,5,6,7,10,8,12,11,13,15,18,21,24,25,27,28,43,3]]]);","extractedComments":[]}