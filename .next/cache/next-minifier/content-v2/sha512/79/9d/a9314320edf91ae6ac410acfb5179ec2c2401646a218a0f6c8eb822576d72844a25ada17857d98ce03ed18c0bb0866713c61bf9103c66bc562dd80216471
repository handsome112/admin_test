{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{Jijb:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/banner/upload\",function(){return n(\"UXXF\")}])},UXXF:function(e,t,n){\"use strict\";n.r(t);var r=n(\"o0o1\"),a=n.n(r),u=n(\"HaE+\"),i=n(\"1OyB\"),o=n(\"vuIU\"),c=n(\"JX7q\"),s=n(\"Ji7U\"),l=n(\"md7G\"),f=n(\"foSv\"),b=n(\"rePB\"),p=n(\"q1tI\"),d=n.n(p),h=n(\"8Kt/\"),m=n.n(h),v=n(\"tsqr\"),_=n(\"Bfpx\"),y=n(\"Kmg5\"),g=n(\"2yP/\"),w=n(\"1dGh\"),O=n(\"nOHt\"),j=n.n(O),N=\"/var/www/admin.dtest.live/pages/banner/upload.tsx\",k=d.a.createElement;function x(e){var t=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(f.a)(e);if(t){var a=Object(f.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var R=function(e){Object(s.a)(n,e);var t=x(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];return e=t.call.apply(t,[this].concat(a)),Object(b.a)(Object(c.a)(e),\"state\",{uploading:!1,uploadPercentage:0}),Object(b.a)(Object(c.a)(e),\"formRef\",void 0),Object(b.a)(Object(c.a)(e),\"_banner\",void 0),e}return Object(o.a)(n,[{key:\"componentDidMount\",value:function(){this.formRef||(this.formRef=Object(p.createRef)())}},{key:\"onUploading\",value:function(e){this.setState({uploadPercentage:e.percentage})}},{key:\"setFormVal\",value:function(e,t){this.formRef.current.setFieldsValue(Object(b.a)({},e,t))}},{key:\"beforeUpload\",value:function(e){return this._banner=e,!1}},{key:\"submit\",value:function(){var e=Object(u.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(\"img\"!=t.type||this._banner){e.next=2;break}return e.abrupt(\"return\",v.a.error(\"Please select banner!\"));case 2:return e.next=4,this.setState({uploading:!0});case 4:if(e.prev=4,\"img\"!=t.type){e.next=10;break}return e.next=8,y.a.uploadBanner(this._banner,t,this.onUploading.bind(this));case 8:e.next=13;break;case 10:if(\"html\"!=t.type){e.next=13;break}return e.next=13,y.a.create(t);case 13:return v.a.success(\"Banner has been uploaded\"),e.next=16,this.setState({uploading:!1},(function(){return window.setTimeout((function(){j.a.push({pathname:\"/banner\"},\"/banner\")}),1e3)}));case 16:e.next=23;break;case 18:return e.prev=18,e.t0=e.catch(4),v.a.error(\"An error occurred, please try again!\"),e.next=23,this.setState({uploading:!1});case 23:return e.abrupt(\"return\",void 0);case 24:case\"end\":return e.stop()}}),e,this,[[4,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:\"render\",value:function(){this.formRef||(this.formRef=Object(p.createRef)());var e=this.state,t=e.uploading,n=e.uploadPercentage;return k(d.a.Fragment,null,k(m.a,{__self:this,__source:{fileName:N,lineNumber:95,columnNumber:9}},k(\"title\",{__self:this,__source:{fileName:N,lineNumber:96,columnNumber:11}},\"Upload banner\")),k(g.a,{breadcrumbs:[{title:\"Banners\",href:\"/banner\"},{title:\"Upload new banner\"}],__self:this,__source:{fileName:N,lineNumber:98,columnNumber:9}}),k(_.a,{__self:this,__source:{fileName:N,lineNumber:99,columnNumber:9}},k(w.a,{submit:this.submit.bind(this),beforeUpload:this.beforeUpload.bind(this),uploading:t,uploadPercentage:n,__self:this,__source:{fileName:N,lineNumber:100,columnNumber:11}})))}}],[{key:\"getInitialProps\",value:function(){var e=Object(u.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ctx,e.abrupt(\"return\",n.query);case 2:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(p.PureComponent);t.default=R}},[[\"Jijb\",0,1,9,17,2,4,5,6,7,8,10,11,12,13,14,15,16,19,18,20,21,28,40,3]]]);","extractedComments":[]}